<!doctype html>
<html lang="fr">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Formation : Programmation — Catalogue Rivaldo</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <style>
    .card-hover:hover { transform: translateY(-6px); box-shadow: 0 10px 25px rgba(0,0,0,0.08); }
  </style>
</head>
<body class="bg-slate-50 text-slate-800 min-h-screen">

  <header class="bg-white border-b py-6">
    <div class="max-w-6xl mx-auto px-6 flex items-center justify-between">
      <div>
        <h1 class="text-2xl font-extrabold">Formation : Programmation</h1>
        <p class="text-sm text-slate-500">Sous-sections et ressources PDF de la formation programmation.</p>
      </div>
      <div class="text-right">
        <span id="lastUpdated" class="text-sm text-slate-500">Dernière mise à jour : —</span>
      </div>
    </div>
  </header>

  <main class="max-w-6xl mx-auto px-6 py-10">

    <!-- Bouton Télécharger tout -->
    <div class="flex justify-between items-center mb-6">
      <a href="index.html" class="text-indigo-600 text-sm font-medium">&larr; Retour à l'accueil</a>
      <button onclick="confirmDownload('formation-programmation.zip')" class="px-4 py-2 bg-indigo-600 text-white rounded text-sm">Télécharger tout</button>
    </div>

    <!-- Recherche et tri -->
    <div class="flex gap-4 items-center mb-6">
      <input id="search" type="search" placeholder="Chercher une formation..." class="flex-1 border rounded-lg px-4 py-2" />
      <select id="sort" class="border rounded-lg px-3 py-2">
        <option value="new">Trier : du plus récent</option>
        <option value="old">Trier : du plus ancien</option>
        <option value="alpha">Trier : par ordre alphabétique</option>
      </select>
    </div>

    <!-- Grid des formations -->
    <section id="grid" class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6"></section>

    <div class="mt-10 text-center text-sm text-slate-500">
      <p>Ces formations sont regroupées sous la catégorie <strong>Programmation</strong>.</p>
    </div>
  </main>

  <footer class="text-center text-xs text-slate-500 py-6">
    © <span id="year"></span> Rivaldo — Formation Programmation
  </footer>

  <script>
    // Données des sous-formations
    const coursesData = [
      {
        "id": "p001",
        "title": "Apprendre HTML & CSS",
        "description": "Les bases du développement web avec HTML et CSS.",
        "file": "pdf/1-html_css.pdf",
        "thumbnail": "https://plus.unsplash.com/premium_photo-1685086785636-2a1a0e5b591f?ixlib=rb-4.1.0&auto=format&fit=crop&q=80&w=1332",
        "updated": "2025-09-22"
      },
      {
        "id": "p002",
        "title": "Introduction à JavaScript",
        "description": "Découvre les bases du langage JavaScript pour le web.",
        "file": "Learn.to.Code.With.JavaScript.pdf",
        "thumbnail": "https://images.unsplash.com/photo-1604964432806-254d07c11f32?ixlib=rb-4.1.0&auto=format&fit=crop&q=80&w=880",
        "updated": "2025-09-25"
      },
      {
        "id": "p003",
        "title": "Kotlin pour Android",
        "description": "Apprends à coder des apps Android en Kotlin.",
        "file": "Apress.Learn.Kotlin.for.Android.Development.pdf",
        "thumbnail": "https://images.unsplash.com/photo-1587620962725-abab7fe55159?ixlib=rb-4.1.0&auto=format&fit=crop&q=80&w=1331",
        "updated": "2025-09-30"
      },
      {
        "id": "p004",
        "title": "Développement web avec PHP",
        "description": "Découvre les bases de PHP pour créer des sites web dynamiques et gérer des formulaires.",
        "file": "F006014.pdf",
        "thumbnail": "https://images.unsplash.com/photo-1629904853716-f0bc54eea481?ixlib=rb-4.1.0&auto=format&fit=crop&q=80&w=1170",
        "updated": "2025-09-30"
      }
    ];

    // Affichage du grid
    function renderGrid(data) {
      const grid = document.getElementById('grid');
      grid.innerHTML = '';
      data.forEach(item => {
        const encodedFile = encodeURI(item.file);
        const card = document.createElement('article');
        card.className = 'bg-white rounded-lg overflow-hidden border card-hover';
        card.innerHTML = `
          <img src="${item.thumbnail}" alt="${item.title}" class="w-full h-40 object-cover">
          <div class="p-4">
            <h3 class="font-semibold text-lg">${item.title}</h3>
            <p class="text-sm text-slate-600 mt-2">${item.description}</p>
            <div class="mt-4 flex items-center justify-between">
              <div class="text-xs text-slate-500">Mis à jour : ${item.updated}</div>
              <div class="flex gap-2">
                <a href="${encodedFile}" target="_blank" class="px-3 py-1 rounded text-sm border">Voir</a>
                <a href="${encodedFile}" download class="px-3 py-1 rounded text-sm bg-indigo-600 text-white">Télécharger</a>
              </div>
            </div>
          </div>
        `;
        grid.appendChild(card);
      });
    }

    // Filtre et tri
    function filterAndRender() {
      const q = document.getElementById('search').value.trim().toLowerCase();
      const sort = document.getElementById('sort').value;
      let filtered = coursesData.filter(c => (c.title + ' ' + (c.description||'')).toLowerCase().includes(q));

      if (sort === 'new') filtered.sort((a,b) => (b.updated||'').localeCompare(a.updated||''));
      if (sort === 'old') filtered.sort((a,b) => (a.updated||'').localeCompare(b.updated||''));
      if (sort === 'alpha') filtered.sort((a,b) => a.title.localeCompare(b.title));

      renderGrid(filtered);
    }

    document.getElementById('search').addEventListener('input', filterAndRender);
    document.getElementById('sort').addEventListener('change', filterAndRender);

    // Dernière mise à jour
    function updateLastUpdated(data) {
      const dates = data.map(d => d.updated).filter(Boolean).sort();
      const last = dates.length ? dates[dates.length - 1] : null;
      document.getElementById('lastUpdated').textContent = last ? `Dernière mise à jour : ${last}` : 'Dernière mise à jour : —';
    }

    // Initialisation
    document.getElementById('year').textContent = new Date().getFullYear();
    renderGrid(coursesData);
    updateLastUpdated(coursesData);
  </script>

  <!-- Confirmation pour télécharger tout -->
  <script>
    function confirmDownload(zipPath) {
      const overlay = document.createElement('div');
      overlay.style.position = 'fixed';
      overlay.style.top = '0';
      overlay.style.left = '0';
      overlay.style.width = '100%';
      overlay.style.height = '100%';
      overlay.style.background = 'rgba(0,0,0,0)';
      overlay.style.display = 'flex';
      overlay.style.alignItems = 'center';
      overlay.style.justifyContent = 'center';
      overlay.style.zIndex = '9999';
      overlay.style.opacity = '0';
      overlay.style.transition = 'opacity 0.3s ease';

      const box = document.createElement('div');
      box.style.background = 'white';
      box.style.padding = '20px';
      box.style.borderRadius = '10px';
      box.style.width = '90%';
      box.style.maxWidth = '400px';
      box.style.textAlign = 'center';
      box.style.transform = 'translateY(-50px) scale(0.7)';
      box.style.transition = 'transform 0.5s cubic-bezier(0.68, -0.55, 0.27, 1.55)';

      box.innerHTML = `
        <h3 style="margin-bottom: 10px; font-weight: bold;">Confirmation</h3>
        <p>Voulez-vous télécharger tous les documents de cette section ?</p>
        <div style="margin-top: 15px;">
          <button id="confirmBtn" style="background-color: #2563eb; color: white; padding: 8px 16px; border: none; border-radius: 5px; cursor: pointer; margin-right: 10px;">Confirmer</button>
          <button id="cancelBtn" style="background-color: #ccc; padding: 8px 16px; border: none; border-radius: 5px; cursor: pointer;">Annuler</button>
        </div>
      `;

      overlay.appendChild(box);
      document.body.appendChild(overlay);

      requestAnimationFrame(() => {
        overlay.style.opacity = '1';
        box.style.transform = 'translateY(0) scale(1)';
        overlay.style.background = 'rgba(0,0,0,0.6)';
      });

      function closeOverlay() {
        box.style.transform = 'translateY(-50px) scale(0.7)';
        overlay.style.opacity = '0';
        setTimeout(() => document.body.removeChild(overlay), 500);
      }

      document.getElementById('confirmBtn').onclick = () => {
        const link = document.createElement('a');
        link.href = zipPath;
        link.download = '';
        document.body.appendChild(link);
        link.click();
        link.remove();
        closeOverlay();
      };

      document.getElementById('cancelBtn').onclick = closeOverlay;
    }
  </script>

</body>
</html>
